{% extends 'base.html' %}
{% load static %}

{% block head %} 
    <link rel="stylesheet" href="{% static 'listings.css' %}" />
    <style>
      .filters-actions {margin-left: 30px;}
    </style>
    <link rel="stylesheet" href="{% static 'awesomplete.css' %}" />
    <script src="{% static 'awesomplete.js' %}" defer></script>
    <script src="{% static 'mithril.min.js' %}" defer></script>
{% endblock %}

{% block title %}Anunturi{% endblock %}


{% block content %}

<div class="filters">
    <div class="filters-inputs">
      <label for="loc">
        <span>Localitate</span>
        <input type="text" id="loc" name="localitate" placeholder="Ex: Iasi, Bucuresti.." />
      </label>

      <label for="zona">
        <span>Zona</span>
        <input type="text" id="zona" name="zona" placeholder="Ex: Centru Vechi.." />
      </label>
    </div>

    <div class="filters-actions">
      <button id="cam" class="sm secondary bold">caut camere</button>
      <span class="tip">sau</span>
      <button id="ap" class="sm darkish bold">caut apartament</button>
      <input id="ap_val" type="hidden" name="apartament" value="0">
    </div>
  </div>

  <div style="margin-top:2rem;"></div>

  <div class="listings">

    {% if anunturi %}

      {% for anunt in anunturi %}
        <article class="card product">
            <img src="/media/{{ anunt.img1 }}" />
            <img class="fav" src="{% static '/icons/favorite_border.svg' %}" />
            <span class="btn complementary price"> {{ anunt.pret }} euro </span>

            <h3 class="title">
                {{ anunt.titlu }}
            </h3>
          
        </article>
      {% endfor %}
      {% else %}
        <h2>Nici un anunti disponibil momentan.</h2>
      {% endif %}
    
  </div>
  
  <div style="margin-top:2rem;"></div>
  
    <button class="greyish primary-lighten-text outlined-darkish">
      Mai mult
    </button>

  <div style="margin-top:2rem;"></div>

  <p class="tip mtop mtop btm-right">
    Filtrele se fac automat! (pe baza anunturilor adaugate la favorite)
  </p>




  <script>

    document.addEventListener("DOMContentLoaded", function(event){

      //Toggle intre camere si apartament
      let cambtn = document.getElementById("cam");
      let apbtn = document.getElementById("ap");
      let ap_val = document.getElementById("ap_val"); 
      let not_selected = "sm darkish bold";
      let selected = "sm secondary bold";

      cambtn.addEventListener("click", function(e){
          e.preventDefault();
          cambtn.className = selected;
          apbtn.className  = not_selected;
          ap_val.value = "0";
      },false);

      apbtn.addEventListener("click", function(e){
          e.preventDefault();
          cambtn.className = not_selected;
          apbtn.className  = selected;
          ap_val.value = "1";
      },false);


      var loc = document.getElementById("loc");
      var awesomplete = new Awesomplete(loc);

      awesomplete.minChars = 3;
      awesomplete.maxItems = 5;
      awesomplete.autoFirst = true;
      awesomplete.filter = Awesomplete.FILTER_STARTSWITH;

      awesomplete.list = ["Bucuresti", "Cluj-Napoca", "Timisoara", "Iasi", "Constanta", "Craiova", "Brasov", "Galati", "Ploiesti", "Oradea", "Braila", "Arad", "Pitesti", "Sibiu", "Bacau", "Targu Mures", "Baia Mare", "Buzau", "Botosani", "Satu Mare", "Suceava", "Ramnicu Valcea", "Drobeta-Turnu Severin", "Piatra-Neamt", "Targoviste", "Targu Jiu", "Focsani", "Tulcea", "Resita", "Slatina", "Bistrita", "Calarasi", "Giurgiu", "Deva", "Hunedoara", "Zalau", "Barlad", "Alba Iulia", "Sfantu Gheorghe", "Roman", "Vaslui", "Turda", "Medias", "Alexandria", "Voluntari", "Pipera (Voluntari)", "Slobozia", "Lugoj", "Medgidia", "Onesti", "Miercurea-Ciuc", "Petrosani", "Tecuci", "Mangalia", "Odorheiu Secuiesc", "Ramnicu Sarat", "Sighetu Marmatiei", "Campina", "Navodari", "Campulung", "Caracal", "Sacele", "Fagaras", "Dej", "Rosiori de Vede", "Mioveni", "Curtea de Arges", "Husi", "Reghin", "Sighisoara", "Pantelimon", "Pascani", "Oltenita", "Turnu Magurele", "Caransebes", "Falticeni", "Radauti", "Lupeni", "Dorohoi", "Vulcan", "Campia Turzii", "Zarnesti", "Borsa", "Popesti-Leordeni", "Codlea", "Carei", "Moinesti", "Petrila", "Sebes", "Tarnaveni", "Floresti", "Gherla", "Fetesti-Gara", "Buftea", "Cugir", "Moreni", "Gheorgheni", "Comanesti", "Salonta", "Cernavoda", "Targu Secuiesc", "Bailesti", "Campulung Moldovenesc", "Aiud", "Valea Caselor (Dragasani)", "Dragasani", "Bals", "Bocsa", "Motru", "Corabia", "Bragadiru", "Urziceni", "Rasnov", "Rasnov Romacril", "Buhusi", "Zimnicea", "Marghita", "Mizil", "Cisnadie", "Targu Neamt", "Calafat", "Vatra Dornei", "Adjud", "Gaesti", "Tandarei", "Gura Humorului", "Chitila", "Viseu de Sus", "Otopeni", "Ludus", "Dragu-Brad", "Brad", "Valu lui Traian", "Cumpana", "Sannicolau Mare", "Valenii de Munte", "Jilava", "Dabuleni", "Filiasi", "Blaj", "Ovidiu", "Simleu Silvaniei", "Matca", "Pecica", "Rovinari", "Videle", "Baicoi", "Pucioasa", "Jimbolia", "Baia Sprie", "Targu Frumos", "Vicovu de Sus", "Orsova", "Sinaia", "Negresti-Oas", "Beius", "Santana", "Pechea", "Simeria", "Boldesti-Scaeni", "Poienile de sub Munte", "Valea lui Mihai", "Covasna", "Targu Ocna", "Toplita", "Sovata", "Otelu Rosu", "Oravita", "Moisei", "Harsova", "Murfatlar", "Beclean", "Poiana Mare", "Huedin", "Babadag", "Marasesti", "Topoloveni", "Sangeorgiu de Mures", "Jibou", "Sabaoani", "Hateg", "Avrig", "Darmanesti", "Marginea", "Moldova Veche", "Ineu", "Bolintin-Vale", "Mihail Kogalniceanu", "Macin", "Tomesti", "Nasaud", "Uricani", "Rosu", "Calan", "Borcea", "Afumati", "Domnesti", "Draganesti-Olt", "Cristuru Secuiesc", "1 Decembrie", "Lumina", "Fetesti", "Mogosoaia", "Modelu", "Dumbravita", "Seini", "Alesd", "Sangeorz-Bai", "Curtici", "Darabani", "Nadlac", "Victoria", "Amara", "Branesti", "Harlau", "Lipova", "Techirghiol", "Agnita", "Sacueni", "Titu", "Siret", "Segarcea", "Odobesti", "Podu Iloaiei", "Ocna Mures", "Urlati", "Strehaia", "Tasnad", "Cajvana", "Tuzla", "Sadova", "Vlahita", "Stei", "Diosig", "Cobadin", "Gilau", "Vladimirescu", "Dancu", "Bumbesti-Jiu", "Busteni", "Peretu", "Cudalbi", "Bosanci", "Balotesti", "Lunca Cetatuii", "Dragalina", "Fieni", "Chisineu-Cris", "Balan", "Sandominic", "Strejnicu", "Baciu", "Fundulea", "Ianca", "Remetea", "Fagetel (Remetea)", "Roseti", "Breaza de Sus", "Cornetu", "Insuratei", "Apahida", "Berceni", "Vicovu de Jos", "Savinesti (Poiana Teiului)", "Savinesti", "Teius", "Barbulesti", "Plosca", "Toflea", "Magurele", "Feldru", "Anina", "Valea Mare (Negresti)", "Negresti", "Peris", "Fundeni", "Giroc", "Baile Borsa", "Oituz", "Rucar", "Curcani", "Valea Mare (Babeni)", "Babeni", "Rodna", "Deta", "Ruscova", "Intorsura Buzaului", "Pancota", "Glina", "Talmaciu", "Copsa Mica", "Motatei", "Gugesti", "Schela Cladovei", "Sancraiu de Mures", "Iernut", "Targu Lapus", "Maieru", "Prejmer", "Pogoanele", "Dobroesti", "Baraolt", "Arbore", "Homocea", "Corund", "Tufesti", "Giarmata", "Baia", "Dumbraveni", "Eforie Nord", "Horodnic de Sus", "Greci", "Tudora", "Straja", "Rasinari", "Sebis", "Raducaneni", "Siria", "Paunesti", "Saveni", "Tunari"];


  //DOM loaded    
  });

  </script>
{% endblock %}
